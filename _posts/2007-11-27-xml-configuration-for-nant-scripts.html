--
layout: post
title: Xml Configuration For NAnt Scripts
categories: [XML/XSL, Configuration, Nant]
tags: [XML/XSL, Configuration, Nant]
--
<P>NAnt scripts can get cluttered with configuration values. One way to clean this up is to create properties that are used throughout the script. Although, you could take this a step further and store NAnt script configuration values in an Xml file. I like this approach because it creates a clear separation between the script and modifiable parameters. For example lets say we have an Xml configuration file called Build.config that contains paths:</P>
<P><FONT face="Courier New"><?xml version="1.0"?><BR><buildConfiguration><BR>    <paths><BR>        <path name="SubversionPath" value="C:\Program Files\CollabNet Subversion Server\svn.exe" /><BR>    </paths><BR></buildConfiguration></FONT></P>
<P>Our NAnt script could then load these paths into parameters in an "init" target. All other targets could then depend on this "init" target.</P><FONT face="Courier New"><?xml version="1.0"?><BR><project name="Build" default="default"></FONT><BR><FONT face="Courier New">    <property name="SubversionPath" value="" /></FONT><BR><FONT face="Courier New" color=#800000><STRONG>    <target name="init"><BR>        <xmlpeek </STRONG></FONT><BR><FONT face="Courier New" color=#800000><STRONG>              file="Build.config" </STRONG></FONT><BR><FONT face="Courier New" color=#800000><STRONG>              xpath="/buildConfiguration/paths/path[@name = 'SubversionPath']/@value" </STRONG></FONT><BR><FONT face="Courier New" color=#800000><STRONG>              property="SubversionPath"/><BR>     </target></STRONG></FONT><BR><FONT face="Courier New">     <target name="default"<FONT color=#800000><STRONG> depends="init"</STRONG></FONT>><BR>         <echo message="${SubversionPath}" /></FONT><BR><FONT face="Courier New">     </target></FONT><BR><FONT face="Courier New"></project></FONT><BR>
<P><A href="http://blog.mikeobrien.net/content/binary/XmlConfigurationForNAntScripts_9CE8/image.png" atomicselection="true"><IMG style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" height=330 alt=image src="/content/3d91b40683ff42fa9b7ed781d9af5280.png" width=667 border=0></A></P>