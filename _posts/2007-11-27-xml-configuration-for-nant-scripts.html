---
layout: post
title: Xml Configuration For NAnt Scripts
tags: [XML/XSL, Configuration, Nant]
redirect_from:
  - /blog/2007/11/xml-configuration-for-nant-scripts.html
---
<P>NAnt scripts can get cluttered with configuration values. One way to clean this up is to create properties that are used throughout the script. Although, you could take this a step further and store NAnt script configuration values in an Xml file. I like this approach because it creates a clear separation between the script and modifiable parameters. For example lets say we have an Xml configuration file called Build.config that contains paths:</P>
<P><FONT face="Courier New"><?xml version="1.0"?><BR><buildConfiguration><BR>&#160;&#160;&#160; <paths><BR>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <path name="SubversionPath" value="C:\Program Files\CollabNet Subversion Server\svn.exe" /><BR>&#160;&#160;&#160; </paths><BR></buildConfiguration></FONT></P>
<P>Our NAnt script could then load these paths into parameters in an "init" target. All other targets could then depend on this "init" target.</P><FONT face="Courier New"><?xml version="1.0"?><BR><project name="Build" default="default"></FONT><BR><FONT face="Courier New">&#160;&#160;&#160; <property name="SubversionPath" value="" /></FONT><BR><FONT face="Courier New" color=#800000><STRONG>&#160;&#160;&#160; <target name="init"><BR>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <xmlpeek </STRONG></FONT><BR><FONT face="Courier New" color=#800000><STRONG>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; file="Build.config" </STRONG></FONT><BR><FONT face="Courier New" color=#800000><STRONG>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; xpath="/buildConfiguration/paths/path[@name = 'SubversionPath']/@value" </STRONG></FONT><BR><FONT face="Courier New" color=#800000><STRONG>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; property="SubversionPath"/><BR>&#160;&#160;&#160;&#160; </target></STRONG></FONT><BR><FONT face="Courier New">&#160;&#160;&#160;&#160; <target name="default"<FONT color=#800000><STRONG> depends="init"</STRONG></FONT>><BR>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <echo message="${SubversionPath}" /></FONT><BR><FONT face="Courier New">&#160;&#160;&#160;&#160; </target></FONT><BR><FONT face="Courier New"></project></FONT><BR>
<P><A href="http://blog.mikeobrien.net/content/binary/XmlConfigurationForNAntScripts_9CE8/image.png" atomicselection="true"><IMG style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" height=330 alt=image src="/blog/images/3d91b40683ff42fa9b7ed781d9af5280.png" width=667 border=0></A></P>