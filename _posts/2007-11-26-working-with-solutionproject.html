---
layout: post
title: Working with Solution/Project Configurations in Visual Studio
tags: [Visual Studio 2005, Configuration, Visual Studio 2008, MSBuild]
---
<P>I've tried playing with custom configurations (Outside the stock Debug/Release configurations) in the past and found it confusing. So today I tried it again and had much better success. One thing that had me confused is the relationship between Solution level configuration and Project level configuration. What I didn't realize is that they are all completely separate entities... The "Debug" configuration in SolutionA is different from the "Debug" configuration in ProjectA. The "Debug" configuration in ProjectA is different from the "Debug" configuration in ProjectB. They all just happen to have the same name for consistency (Which is where my confusion began; guess I should have read the manual...). Although they are different entities, project level configurations can be mapped to a solution level configuration.</P>
<P>The example below shows a possible configuration. The <EM>solution</EM> has 2 configurations: "PlanA" and "PlanB". The BLL <EM>project</EM> have 2 configurations: "Production" and "Staging". The UI <EM>project</EM> has 2 configurations: "Red" and "Blue". The "PlanA" <EM>solution</EM> configuration has the BLL <EM>project</EM> configuration set to "Staging" while the UI <EM>project</EM> configuration is set to "Red".</P>
<P><A href="http://blog.mikeobrien.net/content/binary/WorkingwithSolutionProjectConfigurations_DA50/image.png" atomicselection="true"><IMG style="BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px" height=382 alt=image src="/blog/images/da82338715124b01b4d6aa9f245abcc7.png" width=663 border=0></A> </P>
<P>So basically the "PlanA" and "PlanB" solution configurations represent a specific combination of project configurations. When you build a solution with a specific solution level configuration it will know what project level configuration to use with each of the individual projects in the solution. "PlanA" would use "Staging" for the BLL and "Red" for the UI.</P>
<P>Another thing that got me is how to add/edit/remove the project level configurations. It's pretty simple; the <EM>solution</EM> level configuration dropdown (Shown in red above) has a "<New...>" and "<Edit..>" item that enables you to modify solution level configurations. Also each individual project has a configuration dropdown (Shown in blue and green above) that give you the same options for <EM>project</EM> specific configurations. </P>
<P>Another thing to remember is that when you add a new project, the Debug/Release solution configurations will be automatically re-added. So if you removed these earlier they will have to be removed again.</P>
<P>Oh, and one more thing. <A href="http://weblogs.asp.net/scottgu/archive/2005/08/21/423201.aspx">Website Projects</A>&#160;(WSP) show up as having only one option for configuration and platform with no modification options (Shown in red below). This is because configurations do not apply to a&#160;WSP (Since it isnt really a project and does not have a project file). It's a little misleading that there is one item in the list as if its assigned to it. It should just be disabled IMO. In any event it can be ignored. If you want to configure build options for a WSP, create a corresponding <A href="http://msdn2.microsoft.com/en-us/asp.net/Aa336619.aspx">Web Deployment Project</A> (WDP). You can then create configurations on the WDP that apply to the the WSP.</P>
<P><A href="http://blog.mikeobrien.net/content/binary/WorkingwithSolutionProjectConfigurations_DA50/image_3.png" atomicselection="true"><IMG style="BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px" height=320 alt=image src="/blog/images/4b7b4719e1f442ada870239c965860a9.png" width=654 border=0></A></P>