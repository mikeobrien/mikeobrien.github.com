---
layout: post
title: Installing OpenFire on Windows 2003 as a Service with Active Directory using the Pidgin Client
tags: [Jabber, Win Server 2003, OpenFire, Active Directory]
redirect_from:
  - /blog/2008/06/installing-openfire-on-windows-2003-as.html
---
<p>The following steps outline how to install <a href="http://www.igniterealtime.org/projects/openfire/index.jsp">OpenFire</a> on Windows Server 2003 as a service with Active Directory using the Pidgin client. These steps apply to Openfire 3.5.1 and may change with later versions.</p>  <ol>   <li>Download the <a href="http://www.igniterealtime.org/downloads/index.jsp#openfire">OpenFire Windows installer</a> and run it. Once the install is complete there should be a checkbox that says "Run OpenFire", make sure this is checked and click <strong>Finish</strong>. </li>    <li>The OpenFire GUI should now appear, once the server is started the <strong>LaunchAdmin</strong> button will be enabled, click it. This will open the configuration wizard in a browser. </li>    <li>Configure the server as follows:      <ol>       <li><strong>Language Selection</strong>: Choose your speak </li>        <li><strong>Server Settings</strong>: Accept the defaults unless you need to change these. </li>        <li>Database Settings: This tutorial assumes an embedded database. If you need to run OpenFire in a demanding environment you will probably want to <a href="http://www.igniterealtime.org/builds/openfire/docs/latest/documentation/database.html">use an external database</a>. </li>        <li><strong>Profile Settings</strong>: Choose the <strong>Directory Server (LDAP)</strong> option and click <strong>Continue</strong>.           <ol>           <li><strong>Connection Settings</strong>: Set the Host to an <strong>Active Directory</strong> server and accept the default port. Set the distinguished name (DN) to the base location of your users. All users in this and child objects will be available to Openfire. The first portion of the DN is the base object name. To reference a built in object like Users you would use the canonical name identifier; <strong>cn=Users</strong>. For a custom organization unit object you would use the OU identifier; <strong>ou=MyOrgUnit</strong>. The following domain objects use the domain class identifier, <strong>dc=</strong>. So for the domain denver.mycompany.int the second portion of the DN would be <strong>dc=denver,dc=mycompany,dc=int</strong>. Next specify a user that has rights to access the Active Directory store. This account only needs to be in the Domain Users group (Unless you want to be able to write back to AD). The DN of this user can be specified as a fully qualified username; <strong>MyDomain\Username</strong>. One a side note, the password field has a limit of 30 characters so if you are using a password that exceeds this length it will be truncated and your account will not authenticate. Press <strong>Test Settings</strong> to verify your settings and press <strong>Save & Continue</strong> if they test successfully.               <blockquote>               <p><a href="http://blog.mikeobrien.net/content/binary/InstallingOpenFireonWindows2003asaServic_AC9A/image.png"><img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" height="337" alt="image" src="/blog/images/0ca662afc7b7498b97cc89606c7ea4a9.png" width="566" border="0" /></a> </p>             </blockquote>           </li>            <li><strong>User Mapping</strong>: Accept the defaults and press <strong>Save & Continue</strong>. </li>            <li><strong>Group Mapping</strong>: Accept the defaults and press <strong>Save & Continue</strong>. </li>         </ol>       </li>        <li><strong>Administrator Account</strong>: Enter the username (This username is not fully qualified; just use the username without the domain) of the user who will administer the OpenFire server. You can add as many administrators as you wish. Press <strong>Continue</strong>. </li>        <li>Once the setup is complete press <strong>Login to the admin console </strong>and login with an admin account you specified in the last step. If you run into any issues (Like not being able to add admins or a server error on the last page in the wizard) try uninstalling and reinstalling. </li>     </ol>   </li>    <li>In the admin you can set a number of settings, here are a few that I was interested in:      <ol>       <li>Server Settings          <ol>           <li>Server to Server Settings              <ol>               <li>Service Enabled = False </li>             </ol>           </li>            <li>Registration Settings              <ol>               <li>Inband Account Registration = Disabled </li>                <li>Change Password = Disabled </li>                <li>Anonymous Login = Disabled </li>             </ol>           </li>            <li>Offline Messages              <ol>               <li>Store\Always Store </li>             </ol>           </li>            <li>Security Settings              <ol>               <li>Client Connection Security = Required </li>             </ol>           </li>         </ol>       </li>     </ol>   </li>    <li>Now close out the OpenFire GUI, press <strong>Quit</strong>. </li>    <li>Open a command prompt and set your working directory as <strong>C:\Program Files\Openfire\bin</strong> or whatever your OpenFire install directory is. </li>    <li>Run the following two commands to install the OpenFire service and to start it:      <p><font face="Courier New" size="2">openfire-service /install         <br />openfire-service /start</font></p>   </li> </ol>  <p>&#160;</p>  <p>The following steps demonstrate how to setup Pidgin to connect to the OpenFire server you just installed.</p>  <ol>   <li>Download and install Pidgin <a href="http://www.pidgin.im/download/windows/">here</a>.</li>    <li>Once Pidgin is running right-click the icon in the systray and select <strong>Accounts</strong>.</li>    <li>Add a new account. </li>    <ol>     <li>Under the Basic tab enter the following information:</li>      <ol>       <li><strong>Protocol</strong>: XMPP </li>        <li><strong>Screen Name</strong>: Your domain username (This username is not fully qualified; just use the username without the domain).</li>        <li><strong>Domain</strong>: The name of the server OpenFire is running on.</li>        <li><strong>Resource</strong>: Doesn't matter.</li>        <li><strong>Password</strong>: Guess....</li>        <li><strong>Local Alias</strong>: Whatever you want.</li>     </ol>      <li>Under the Advanced tab enter the following information:</li>      <ol>       <li><strong>Require SSL/TLS</strong>: Unchecked</li>        <li><strong>Force old (port 5223) SSL</strong>: Checked</li>        <li><strong>Allow plaintext auth...</strong>: Unchecked</li>        <li><strong>Connect port</strong>: 5223</li>        <li><strong>Connect server</strong>: Blank</li>        <li><strong>File transfer proxies</strong>: The name of the server with port 7777 specified (IE <strong>MyOpenFireServer:7777</strong>).</li>        <li><strong>Proxy type</strong>: Use the default.</li>     </ol>      <li>Click <strong>Save</strong></li>   </ol>    <li>To browse for users goto <strong>Accounts|{username}@{servername}/{resource} (XMPP)|Search for users...</strong>.</li>    <li>In the <strong>Enter a User Directory</strong> dialog accept the default and click <strong>Search Directory</strong>. </li>    <li>In the Advanced User Search dialog enter an asterisk (Or a search string) and click ok. This will return a list of users that you can now add as buddies.</li> </ol>