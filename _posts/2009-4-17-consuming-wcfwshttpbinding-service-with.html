---
layout: post
title: Consuming a WCF/wsHttpBinding service with NetBeans 6.5.1
tags: [Java, Web Services, .NET 3.5, Interoperability, WCF, NetBeans]
redirect_from:
  - /blog/2009/04/consuming-wcfwshttpbinding-service-with.html
---
<p></p> <p>I have been struggling all week trying to get a client created with the NetBeans 6.5.1 IDE to communicate with a WCF service using the wsHttpBinding. The symptoms were that it would connect and just hang when I made the soap call. I took a look at the message that was being sent across the wire and I noticed that JAX-WS was not sending the WS-Addressing headers. So after much searching and hitting the Metro message board and gave up and moved onto something else. While I was working on that something else I happened to look at the "port" factory method on the proxy that's generated by wsimport and noticed that you could pass multiple "WebServiceFeature"s, one of which was one for WS-Addressing! Passed that in and voila, it worked! Here is an example:</p><pre class="code"><span style="color: blue">try </span>{ <span style="color: green">// Call Web Service Operation
    </span>yada.SystemService service = <span style="color: blue">new </span>yada.SystemService();
    yada.Sys port = service.getYadaSystem(<strong><font size="4"><span style="color: blue">new </span>AddressingFeature(<span style="color: blue">true</span>, <span style="color: blue">true</span>)</font></strong>);
    <span style="color: green">// TODO process result here
    </span>yada.VersionInfo result = port.getVersion();
    System.<span style="color: blue">out</span>.println(<span style="color: #a31515">"Result = "</span>+result);
} <span style="color: blue">catch </span>(Exception ex) {
    System.<span style="color: blue">out</span>.println(ex.getMessage());
}</pre><a href="http://11011.net/software/vspaste"></a>
<p>You can read more about this class <a href="http://java.sun.com/javase/6/docs/api/javax/xml/ws/soap/AddressingFeature.html">here</a>. I have no idea why wsimport doesent just bake this into the proxy as the policy in the WSDL clearly states that it uses WS-Addressing by way of the UsingAddressing element. Strange...</p>