--
layout: post
title: Embedding an F# Executable Icon
categories: [F#]
tags: [F#]
--
<p>VB.NET and C# have a convenient way to embed an executable icon in the Application properties. As of v1.9.6.16 F# does not. Nevertheless its fairly simple to add one, albeit with a few additional steps.</p>  <p>1) First you’ll need to install the .NET 2.0 Framework SDK.</p>  <p>2) Create a resource script as follows (Including the number one, that’s not a line number… Also replace your icon name) and save it as AppIcon.rc (Or whatever):</p>  <p><font color="#0000a0" size="2" face="Courier New"><strong>1 ICON MyAppIcon.ico</strong></font></p>  <p>3) Next compile the script with the <a href="http://msdn.microsoft.com/en-us/library/aa381055(VS.85).aspx">resource compiler utility</a> as follows (Make sure the icon file is in the same folder as the resource script. Also remove the “ (x86)” from the resource compiler path if your working in a 32 bit OS):</p>  <p><font color="#000080" size="2" face="Courier New">“C:\Program Files (x86)\Microsoft.NET\SDK\v2.0\Bin\rc" AppIcon.rc</font></p>  <p>This will create a win32 resource file called AppIcon.RES in the same folder. Once this is done you wont have to do this again unless you want to change the icon (So you can delete the .rc file if you want at this point or hang onto it in case you want to change the icon in the future).</p>  <p>4) Now we need to tell the F# compiler to include the resource file in the resulting assembly. You’ll notice that there is a textbox under the Application properties tab for a resource file, but this is for a <strong>.NET</strong> resource file not a win32 one. So we’ll have to specify our win32 resource file with a compiler flag under the Build properties tab, in the “Other flags” textbox using the “—win32res” compiler flag:</p>  <p><a href="http://blog.mikeobrien.net/content/binary/WindowsLiveWriter/EmbeddinganFAssemblyIcon_126C3/image_2.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="/content/cd95fcd5bfef49229796d206363112ff.png" width="678" height="301" /></a> </p>  <p>Now when we compile, the resource will be included in the resulting file and the assembly icon will show up in Windows Explorer. </p>  <p><a href="http://blog.mikeobrien.net/content/binary/WindowsLiveWriter/EmbeddinganFAssemblyIcon_126C3/image_8.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="/content/e0a307face9d402587f15ccd47f41993.png" width="369" height="278" /></a> </p>  <p>On a side note. you’ll probably want to include different sizes of icons for the different views in Windows Explorer (Detail, small, etc). Most icon or image libraries ship with multiple sizes of all their images. Instead of using a single icon file (Which will only give you one icon size in Windows Explorer and look distorted in other views) you can create a multi-icon file with different sizes of the same icon. Windows explorer will automatically pick the appropriate size for the current view (Which looks a lot better!). One free tool you can use to create mutli-icon files is <a href="http://www.towofu.net/soft/e-aicon.php">@icon sushi</a>. To do this open icon sushi and drag all the different sizes of images (They can be almost any image format not just icons) onto the window. Then <strong>select them all</strong> and right-click “Save|Save as Multiple Icon...” click “File|Save as Multiple Icon...”. Using this type of file as your icon resource will result in what is seen in the image above where there are multiple icon resources of different sizes for Explorer to choose from.</p>  <p><a href="http://blog.mikeobrien.net/content/binary/WindowsLiveWriter/EmbeddinganFAssemblyIcon_126C3/image_10.png"><img style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" title="image" border="0" alt="image" src="/content/4e9faecee33649e683df3a929379d058.png" width="582" height="379" /></a></p>