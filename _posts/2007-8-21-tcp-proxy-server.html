---
layout: post
title: TCP Proxy Server
tags: [Visual Studio 2005, .NET, Sockets, C#, .NET 2.0]
---
<P>Attached is the source for a simple TCP proxy server. I whipped it up pretty quickly so it probably needs some refactoring if you plan to use it in production. The server class is loosely based on the <A href="http://www.asp.net/downloads/archived/cassini/" target=_blank>Cassini implementation</A>. You can set the&#160;listen port and&#160;forward host/port in the app config:</P><FONT color=#0000ff size=2>
<P><</FONT><FONT color=#800000 size=2>configuration</FONT><FONT color=#0000ff size=2>></P>
<P>&#160;&#160;&#160; <</FONT><FONT color=#800000 size=2>appSettings</FONT><FONT color=#0000ff size=2>></P>
<P>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <</FONT><FONT color=#800000 size=2>add</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>key</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>listenPort</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>value</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>443</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>/></P>
<P>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <</FONT><FONT color=#800000 size=2>add</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>key</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>forwardHost</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>value</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>wush.net</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>/></P>
<P>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <</FONT><FONT color=#800000 size=2>add</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>key</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>forwardPort</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>value</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>443</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>/></P>
<P>&#160;&#160;&#160; </</FONT><FONT color=#800000 size=2>appSettings</FONT><FONT color=#0000ff size=2>></P>
<P></</FONT><FONT color=#800000 size=2>configuration</FONT><FONT color=#0000ff size=2>></P></FONT>
<P><A href="http://blog.mikeobrien.net/content/binary/TCPProxyServer_B299/image.png" atomicselection="true"><IMG style="BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px" height=339 alt=image src="/content/479361356bff417b930b2248aa610599.png" width=362 border=0></A></P><A href="https://docs.google.com/uc?id=0Bynmohn6qHD_MjFkOWYzNjgtZDk3MS00YTY2LWFkMzMtODYxNGNkZDhjMWMw">TCPProxy.zip (24.81 KB)</A>